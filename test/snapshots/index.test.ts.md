# Snapshot report for `test/index.test.ts`

The actual snapshot is saved in `index.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## simple

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      default: () => input_default␊
    });␊
    ␊
    // foo.ts␊
    var foo_default = "foo";␊
    ␊
    // input.ts␊
    var input_default = foo_default;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {});␊
    `

## enable --dts-resolve for specific module

> Snapshot 1

    `export * from 'vue';␊
    ␊
    type MarkRequired<T, RK extends keyof T> = Exclude<T, RK> & Required<Pick<T, RK>>␊
    ␊
    export { MarkRequired };␊
    `

## multiple formats

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      a: () => a␊
    });␊
    var a = 1;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      a␊
    });␊
    `

## multiple formats and pkg.type is module

> Snapshot 1

    `// input.ts␊
    var a = 1;␊
    export {␊
      a␊
    };␊
    `

## multiple formats with legacy output

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      a: () => a␊
    });␊
    var a = 1;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      a␊
    });␊
    `

## minify

> Snapshot 1

    `var r=Object.defineProperty;var t=o=>r(o,"__esModule",{value:!0});var e=(o,f)=>{t(o);for(var n in f)r(o,n,{get:f[n],enumerable:!0})};e(exports,{foo:()=>u});function u(){return"foo"}0&&(module.exports={foo});␊
    `

## --env flag

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      env: () => env␊
    });␊
    var env = "production";␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      env␊
    });␊
    `

## import css

> ""

    ''

## import css in --dts

> Snapshot 1

    ''

## node protocol

> Snapshot 1

    `var __create = Object.create;␊
    var __defProp = Object.defineProperty;␊
    var __getOwnPropDesc = Object.getOwnPropertyDescriptor;␊
    var __getOwnPropNames = Object.getOwnPropertyNames;␊
    var __getProtoOf = Object.getPrototypeOf;␊
    var __hasOwnProp = Object.prototype.hasOwnProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __reExport = (target, module2, desc) => {␊
      if (module2 && typeof module2 === "object" || typeof module2 === "function") {␊
        for (let key of __getOwnPropNames(module2))␊
          if (!__hasOwnProp.call(target, key) && key !== "default")␊
            __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });␊
      }␊
      return target;␊
    };␊
    var __toModule = (module2) => {␊
      return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);␊
    };␊
    ␊
    // input.ts␊
    var import_node_fs = __toModule(require("fs"));␊
    console.log(import_node_fs.default);␊
    `

## external

> Snapshot 1

    `var __create = Object.create;␊
    var __defProp = Object.defineProperty;␊
    var __getOwnPropDesc = Object.getOwnPropertyDescriptor;␊
    var __getOwnPropNames = Object.getOwnPropertyNames;␊
    var __getProtoOf = Object.getPrototypeOf;␊
    var __hasOwnProp = Object.prototype.hasOwnProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    var __reExport = (target, module2, desc) => {␊
      if (module2 && typeof module2 === "object" || typeof module2 === "function") {␊
        for (let key of __getOwnPropNames(module2))␊
          if (!__hasOwnProp.call(target, key) && key !== "default")␊
            __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });␊
      }␊
      return target;␊
    };␊
    var __toModule = (module2) => {␊
      return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      bar: () => import_bar.bar,␊
      baz: () => baz,␊
      foo: () => import_foo.foo␊
    });␊
    var import_foo = __toModule(require("foo"));␊
    var import_bar = __toModule(require("bar"));␊
    ␊
    // node_modules/baz/index.ts␊
    var baz = "baz";␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      bar,␊
      baz,␊
      foo␊
    });␊
    `

## disable code splitting to get proper module.exports =

> Snapshot 1

    `// input.ts␊
    module.exports = 123;␊
    `

## bundle svelte

> output

    `var __create = Object.create;␊
    var __defProp = Object.defineProperty;␊
    var __getOwnPropDesc = Object.getOwnPropertyDescriptor;␊
    var __getOwnPropNames = Object.getOwnPropertyNames;␊
    var __getProtoOf = Object.getPrototypeOf;␊
    var __hasOwnProp = Object.prototype.hasOwnProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    var __reExport = (target, module2, desc) => {␊
      if (module2 && typeof module2 === "object" || typeof module2 === "function") {␊
        for (let key of __getOwnPropNames(module2))␊
          if (!__hasOwnProp.call(target, key) && key !== "default")␊
            __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });␊
      }␊
      return target;␊
    };␊
    var __toModule = (module2) => {␊
      return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      App: () => App_default␊
    });␊
    ␊
    // App.svelte␊
    var import_internal = __toModule(require("svelte/internal"));␊
    function create_fragment(ctx) {␊
      let span;␊
      return {␊
        c() {␊
          span = (0, import_internal.element)("span");␊
          span.textContent = \`${msg}\`;␊
          (0, import_internal.attr)(span, "class", "svelte-1jo4k3z");␊
        },␊
        m(target, anchor) {␊
          (0, import_internal.insert)(target, span, anchor);␊
        },␊
        p: import_internal.noop,␊
        i: import_internal.noop,␊
        o: import_internal.noop,␊
        d(detaching) {␊
          if (detaching)␊
            (0, import_internal.detach)(span);␊
        }␊
      };␊
    }␊
    var msg = "hello svelte";␊
    var App = class extends import_internal.SvelteComponent {␊
      constructor(options) {␊
        super();␊
        (0, import_internal.init)(this, options, null, create_fragment, import_internal.safe_not_equal, {});␊
      }␊
    };␊
    var App_default = App;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      App␊
    });␊
    `

> css

    `/* svelte-css:App.svelte.css */␊
    span.svelte-1jo4k3z {␊
      color: red;␊
    }␊
    `

## support baseUrl and paths in tsconfig.json

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      foo: () => foo␊
    });␊
    ␊
    // foo.ts␊
    var foo = "foo";␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      foo␊
    });␊
    `

## support baseUrl and paths in tsconfig.json in --dts build

> Snapshot 1

    `declare const foo = "foo";␊
    ␊
    export { foo };␊
    `

## support baseUrl and paths in tsconfig.json in --dts-resolve build

> Snapshot 1

    `declare const foo = "foo";␊
    ␊
    export { foo };␊
    `

## transform import.meta.url in cjs format

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      default: () => input_default␊
    });␊
    ␊
    // ../../../assets/cjs_shims.js␊
    var getImportMetaUrl = () => typeof document === "undefined" ? new URL("file:" + __filename).href : document.currentScript && document.currentScript.src || new URL("main.js", document.baseURI).href;␊
    var importMetaUrl = /* @__PURE__ */ getImportMetaUrl();␊
    ␊
    // input.ts␊
    var input_default = importMetaUrl;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {});␊
    `

## transform __dirname, __filename in esm format

> Snapshot 1

    `// ../../../assets/esm_shims.js␊
    import { fileURLToPath } from "url";␊
    import path from "path";␊
    var getFilename = () => fileURLToPath(import.meta.url);␊
    var getDirname = () => path.dirname(getFilename());␊
    var __dirname = /* @__PURE__ */ getDirname();␊
    var __filename = /* @__PURE__ */ getFilename();␊
    ␊
    // input.ts␊
    var a = __dirname;␊
    var b = __filename;␊
    export {␊
      a,␊
      b␊
    };␊
    `

## code splitting in cjs format

> Snapshot 1

    `"use strict";Object.defineProperty(exports, "__esModule", {value: true});␊
    ␊
    ␊
    var _chunk56VUBPK5js = require('./chunk-56VUBPK5.js');␊
    ␊
    // input.ts␊
    var foo = () => Promise.resolve().then(() => _chunk56VUBPK5js.__toModule.call(void 0, _chunk56VUBPK5js.__require.call(void 0, "./foo-UAUJLGDY.js")));␊
    ␊
    ␊
    exports.foo = foo;␊
    `

> Snapshot 2

    `"use strict";Object.defineProperty(exports, "__esModule", {value: true});␊
    ␊
    ␊
    var _chunk56VUBPK5js = require('./chunk-56VUBPK5.js');␊
    ␊
    // another-input.ts␊
    var foo = () => Promise.resolve().then(() => _chunk56VUBPK5js.__toModule.call(void 0, _chunk56VUBPK5js.__require.call(void 0, "./foo-UAUJLGDY.js")));␊
    ␊
    ␊
    exports.foo = foo;␊
    `

## declaration files with multiple entrypoints #316

> dist/index.d.ts

    `declare const foo = 1;␊
    ␊
    export { foo };␊
    `

> dist/bar/index.d.ts

    `declare const bar = "bar";␊
    ␊
    export { bar };␊
    `

## es5 target

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = function (target) { return __defProp(target, "__esModule", { value: true }); };␊
    var __export = function (target, all) {␊
      __markAsModule(target);␊
      for (var name in all)␊
        { __defProp(target, name, { get: all[name], enumerable: true }); }␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      Foo: function () { return Foo; }␊
    });␊
    var Foo = /*@__PURE__*/(function () {␊
      function Foo () {}␊
    ␊
      Foo.prototype.hi = function hi () {␊
        var a = function () { return "foo"; };␊
        console.log(a());␊
      };␊
    ␊
      return Foo;␊
    }());␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      Foo: Foo␊
    });␊
    `

## multiple targets

> Snapshot 1

    `var __defProp = Object.defineProperty;␊
    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });␊
    var __export = (target, all) => {␊
      __markAsModule(target);␊
      for (var name in all)␊
        __defProp(target, name, { get: all[name], enumerable: true });␊
    };␊
    ␊
    // input.ts␊
    __export(exports, {␊
      answer: () => answer␊
    });␊
    var answer = 42;␊
    // Annotate the CommonJS export names for ESM import in node:␊
    0 && (module.exports = {␊
      answer␊
    });␊
    `
